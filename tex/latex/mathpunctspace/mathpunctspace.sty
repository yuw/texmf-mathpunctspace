\NeedsTeXFormat{LaTeX2e}[1995/12/01]
\ProvidesPackage{mathpunctspace}
   [2017/04/03 v0.2 style file ``mathpunctspace.sty''^^J
    by Yuwsuke Kieda]

\RequirePackage{xkeyval}

\newif\if@postspace@comma     \@postspace@commafalse
\newif\if@postspace@semicolon \@postspace@semicolonfalse
\newif\if@unit@mu             \@unit@mutrue
\DeclareOptionX{comma}[0mu]{%
  \@postspace@commatrue\def\@temp@comma@postskip{#1}}
\DeclareOptionX{semicolon}[0mu]{%
  \@postspace@semicolontrue\def\@temp@semicolon@postskip{#1}}
\DeclareOptionX{unit}[mu]{\def\@unit@space{#1}}
\DeclareOptionX{latexorg}{\endinput}

\ProcessOptionsX

\@ifundefined{@unit@space}{\def\@unit@space{mu}}{}

\def\@tmp@unit@mu{mu}
\ifx\@unit@space\@tmp@unit@mu\@unit@mutrue\else\@unit@mufalse\fi

\if@unit@mu
  \newmuskip\postspace@comma
  \newmuskip\postspace@semicolon
  \@ifundefined{@temp@comma@postskip}{\def\@temp@comma@postskip{0mu}}{}
  \@ifundefined{@temp@semicolon@postskip}{\def\@temp@semicolon@postskip{0mu}}{}
\else
  \newskip\postspace@comma
  \newskip\postspace@semicolon
  \@ifundefined{@temp@comma@postskip}{\def\@temp@comma@postskip{0pt}}{}
  \@ifundefined{@temp@semicolon@postskip}{\def\@temp@semicolon@postskip{0pt}}{}
\fi

\postspace@comma\@temp@comma@postskip\relax
\postspace@semicolon\@temp@semicolon@postskip\relax

\if@postspace@comma
  \begingroup
  \catcode`\,=\active
  \if@unit@mu
    \def\@x@{\def,{\normalcomma\mskip\postspace@comma}}
  \else
    \def\@x@{\def,{\normalcomma\hskip\postspace@comma}}
  \fi
  \expandafter\endgroup\@x@%
  % *only* in math-mode are made active...
  \mathcode`\,="8000
  % last space is *necessary*
  \def\normalcomma{\mathchar"613B }
\fi
\if@postspace@semicolon
  \begingroup
  \catcode`\;=\active
  \if@unit@mu
    \def\@x@{\def;{\normalsemicolon\mskip\postspace@semicolon}}
  \else
    \def\@x@{\def;{\normalsemicolon\hskip\postspace@semicolon}}
  \fi
  \expandafter\endgroup\@x@%
  % *only* in math-mode are made active...
  \mathcode`\;="8000
  % last space is *necessary*
  \def\normalsemicolon{\mathchar"603B }
\fi

\endinput
